(function(){function E(M,K){var O;K=K||{};this.trackingClick=false;this.trackingClickStart=0;this.targetElement=null;this.touchStartX=0;this.touchStartY=0;this.lastTouchIdentifier=0;this.touchBoundary=K.touchBoundary||10;this.layer=M;this.tapDelay=K.tapDelay||200;this.tapTimeout=K.tapTimeout||700;if(E.notNeeded(M)){return}function H(Q,P){return function(){return Q.apply(P,arguments)}}var J=["onMouse","onClick","onTouchStart","onTouchMove","onTouchEnd","onTouchCancel"];var I=this;for(var L=0,N=J.length;L<N;L++){I[J[L]]=H(I[J[L]],I)}if(F){M.addEventListener("mouseover",this.onMouse,true);M.addEventListener("mousedown",this.onMouse,true);M.addEventListener("mouseup",this.onMouse,true)}M.addEventListener("click",this.onClick,true);M.addEventListener("touchstart",this.onTouchStart,false);M.addEventListener("touchmove",this.onTouchMove,false);M.addEventListener("touchend",this.onTouchEnd,false);M.addEventListener("touchcancel",this.onTouchCancel,false);if(!Event.prototype.stopImmediatePropagation){M.removeEventListener=function(P,R,Q){var S=Node.prototype.removeEventListener;if(P==="click"){S.call(M,P,R.hijacked||R,Q)}else{S.call(M,P,R,Q)}};M.addEventListener=function(P,S,Q){var R=Node.prototype.addEventListener;if(P==="click"){R.call(M,P,S.hijacked||(S.hijacked=function(T){if(!T.propagationStopped){S(T)}}),Q)}else{R.call(M,P,S,Q)}}}if(typeof M.onclick==="function"){O=M.onclick;M.addEventListener("click",function(P){O(P)},false);M.onclick=null}}var A=navigator.userAgent.indexOf("Windows Phone")>=0;var F=navigator.userAgent.indexOf("Android")>0&&!A;var C=/iP(ad|hone|od)/.test(navigator.userAgent)&&!A;var D=C&&(/OS 4_\d(_\d)?/).test(navigator.userAgent);var B=C&&(/OS [6-7]_\d/).test(navigator.userAgent);var G=navigator.userAgent.indexOf("BB10")>0;E.prototype.needsClick=function(H){switch(H.nodeName.toLowerCase()){case"button":case"select":case"textarea":if(H.disabled){return true}break;case"input":if((C&&H.type==="file")||H.disabled){return true}break;case"label":case"iframe":case"video":return true}return(/\bneedsclick\b/).test(H.className)};E.prototype.needsFocus=function(H){switch(H.nodeName.toLowerCase()){case"textarea":return true;case"select":return !F;case"input":switch(H.type){case"button":case"checkbox":case"file":case"image":case"radio":case"submit":return false}return !H.disabled&&!H.readOnly;default:return(/\bneedsfocus\b/).test(H.className)}};E.prototype.sendClick=function(K,J){var I,H;if(document.activeElement&&document.activeElement!==K){document.activeElement.blur()}H=J.changedTouches[0];I=document.createEvent("MouseEvents");I.initMouseEvent(this.determineEventType(K),true,true,window,1,H.screenX,H.screenY,H.clientX,H.clientY,false,false,false,false,0,null);I.forwardedTouchEvent=true;K.dispatchEvent(I)};E.prototype.determineEventType=function(H){if(F&&H.tagName.toLowerCase()==="select"){return"mousedown"}return"click"};E.prototype.focus=function(I){var H;if(C&&I.setSelectionRange&&I.type.indexOf("date")!==0&&I.type!=="time"&&I.type!=="month"){H=I.value.length;I.setSelectionRange(H,H)}else{I.focus()}};E.prototype.updateScrollParent=function(J){var H,I;H=J.fastClickScrollParent;if(!H||!H.contains(J)){I=J;do{if(I.scrollHeight>I.offsetHeight){H=I;J.fastClickScrollParent=I;break}I=I.parentElement}while(I)}if(H){H.fastClickLastScrollTop=H.scrollTop}};E.prototype.getTargetElementFromEventTarget=function(H){if(H.nodeType===Node.TEXT_NODE){return H.parentNode}return H};E.prototype.onTouchStart=function(I){var J,H,K;if(I.targetTouches.length>1){return true}J=this.getTargetElementFromEventTarget(I.target);H=I.targetTouches[0];if(C){K=window.getSelection();if(K.rangeCount&&!K.isCollapsed){return true}if(!D){if(H.identifier&&H.identifier===this.lastTouchIdentifier){I.preventDefault();return false}this.lastTouchIdentifier=H.identifier;this.updateScrollParent(J)}}this.trackingClick=true;this.trackingClickStart=I.timeStamp;this.targetElement=J;this.touchStartX=H.pageX;this.touchStartY=H.pageY;if((I.timeStamp-this.lastClickTime)<this.tapDelay){I.preventDefault()}return true};E.prototype.touchHasMoved=function(I){var J=I.changedTouches[0],H=this.touchBoundary;if(Math.abs(J.pageX-this.touchStartX)>H||Math.abs(J.pageY-this.touchStartY)>H){return true}return false};E.prototype.onTouchMove=function(H){if(!this.trackingClick){return true}if(this.targetElement!==this.getTargetElementFromEventTarget(H.target)||this.touchHasMoved(H)){this.trackingClick=false;this.targetElement=null}return true};E.prototype.findControl=function(H){if(H.control!==undefined){return H.control}if(H.htmlFor){return document.getElementById(H.htmlFor)}return H.querySelector("button, input:not([type=hidden]), keygen, meter, output, progress, select, textarea")};E.prototype.onTouchEnd=function(L){var J,M,K,H,I,N=this.targetElement;if(!this.trackingClick){return true}if((L.timeStamp-this.lastClickTime)<this.tapDelay){this.cancelNextClick=true;return true}if((L.timeStamp-this.trackingClickStart)>this.tapTimeout){return true}this.cancelNextClick=false;this.lastClickTime=L.timeStamp;M=this.trackingClickStart;this.trackingClick=false;this.trackingClickStart=0;if(B){I=L.changedTouches[0];N=document.elementFromPoint(I.pageX-window.pageXOffset,I.pageY-window.pageYOffset)||N;N.fastClickScrollParent=this.targetElement.fastClickScrollParent}K=N.tagName.toLowerCase();if(K==="label"){J=this.findControl(N);if(J){this.focus(N);if(F){return false}N=J}}else{if(this.needsFocus(N)){if((L.timeStamp-M)>100||(C&&window.top!==window&&K==="input")){this.targetElement=null;return false}this.focus(N);this.sendClick(N,L);if(!C||K!=="select"){this.targetElement=null;L.preventDefault()}return false}}if(C&&!D){H=N.fastClickScrollParent;if(H&&H.fastClickLastScrollTop!==H.scrollTop){return true}}if(!this.needsClick(N)){L.preventDefault();this.sendClick(N,L)}return false};E.prototype.onTouchCancel=function(){this.trackingClick=false;this.targetElement=null};E.prototype.onMouse=function(H){if(!this.targetElement){return true}if(H.forwardedTouchEvent){return true}if(!H.cancelable){return true}if(!this.needsClick(this.targetElement)||this.cancelNextClick){if(H.stopImmediatePropagation){H.stopImmediatePropagation()}else{H.propagationStopped=true}H.stopPropagation();H.preventDefault();return false}return true};E.prototype.onClick=function(I){var H;if(this.trackingClick){this.targetElement=null;this.trackingClick=false;return true}if(I.target.type==="submit"&&I.detail===0){return true}H=this.onMouse(I);if(!H){this.targetElement=null}return H};E.prototype.destroy=function(){var H=this.layer;if(F){H.removeEventListener("mouseover",this.onMouse,true);H.removeEventListener("mousedown",this.onMouse,true);H.removeEventListener("mouseup",this.onMouse,true)}H.removeEventListener("click",this.onClick,true);H.removeEventListener("touchstart",this.onTouchStart,false);H.removeEventListener("touchmove",this.onTouchMove,false);H.removeEventListener("touchend",this.onTouchEnd,false);H.removeEventListener("touchcancel",this.onTouchCancel,false)};E.notNeeded=function(J){var K;var I;var H;var L;if(typeof window.ontouchstart==="undefined"){return true}I=+(/Chrome\/([0-9]+)/.exec(navigator.userAgent)||[,0])[1];if(I){if(F){K=document.querySelector("meta[name=viewport]");if(K){if(K.content.indexOf("user-scalable=no")!==-1){return true}if(I>31&&document.documentElement.scrollWidth<=window.outerWidth){return true}}}else{return true}}if(G){H=navigator.userAgent.match(/Version\/([0-9]*)\.([0-9]*)/);if(H[1]>=10&&H[2]>=3){K=document.querySelector("meta[name=viewport]");if(K){if(K.content.indexOf("user-scalable=no")!==-1){return true}if(document.documentElement.scrollWidth<=window.outerWidth){return true}}}}if(J.style.msTouchAction==="none"||J.style.touchAction==="manipulation"){return true}L=+(/Firefox\/([0-9]+)/.exec(navigator.userAgent)||[,0])[1];if(L>=27){K=document.querySelector("meta[name=viewport]");if(K&&(K.content.indexOf("user-scalable=no")!==-1||document.documentElement.scrollWidth<=window.outerWidth)){return true}}if(J.style.touchAction==="none"||J.style.touchAction==="manipulation"){return true}return false};E.attach=function(I,H){return new E(I,H)};if(typeof define==="function"&&typeof define.amd==="object"&&define.amd){define(function(){return E})}else{if(typeof module!=="undefined"&&module.exports){module.exports=E.attach;module.exports.FastClick=E}else{window.FastClick=E}}}());
/* iScroll v5.0.5 ~ (c) 2008-2013 Matteo Spinelli ~ http://cubiq.org/license */
var IScroll=(function(C,B,D){var H=C.requestAnimationFrame||C.webkitRequestAnimationFrame||C.mozRequestAnimationFrame||C.oRequestAnimationFrame||C.msRequestAnimationFrame||function(I){C.setTimeout(I,1000/60)};var A=(function(){var L={};var K=B.createElement("div").style;var I=(function(){var Q=["t","webkitT","MozT","msT","OT"],R,O=0,P=Q.length;for(;O<P;O++){R=Q[O]+"ransform";if(R in K){return Q[O].substr(0,Q[O].length-1)}}return false})();function N(O){if(I===false){return false}if(I===""){return O}return I+O.charAt(0).toUpperCase()+O.substr(1)}L.getTime=Date.now||function J(){return new Date().getTime()};L.extend=function(Q,P){for(var O in P){Q[O]=P[O]}};L.addEvent=function(O,R,Q,P){O.addEventListener(R,Q,!!P)};L.removeEvent=function(O,R,Q,P){O.removeEventListener(R,Q,!!P)};L.momentum=function(R,Q,P,T,X){var U=R-Q,S=D.abs(U)/P,V,O,W=0.0006;V=R+(S*S)/(2*W)*(U<0?-1:1);O=S/W;if(V<T){V=X?T-(X/2.5*(S/8)):T;U=D.abs(V-R);O=U/S}else{if(V>0){V=X?X/2.5*(S/8):0;U=D.abs(R)+V;O=U/S}}return{destination:D.round(V),duration:O}};var M=N("transform");L.extend(L,{hasTransform:M!==false,hasPerspective:N("perspective") in K,hasTouch:"ontouchstart" in C,hasPointer:navigator.msPointerEnabled,hasTransition:N("transition") in K});L.isAndroidBrowser=/Android/.test(C.navigator.appVersion)&&/Version\/\d/.test(C.navigator.appVersion);L.extend(L.style={},{transform:M,transitionTimingFunction:N("transitionTimingFunction"),transitionDuration:N("transitionDuration"),transformOrigin:N("transformOrigin")});L.hasClass=function(P,Q){var O=new RegExp("(^|\\s)"+Q+"(\\s|$)");return O.test(P.className)};L.addClass=function(O,P){if(L.hasClass(O,P)){return}var Q=O.className.split(" ");Q.push(P);O.className=Q.join(" ")};L.removeClass=function(P,Q){if(!L.hasClass(P,Q)){return}var O=new RegExp("(^|\\s)"+Q+"(\\s|$)","g");P.className=P.className.replace(O," ")};L.offset=function(O){var P=-O.offsetLeft,Q=-O.offsetTop;while(O=O.offsetParent){P-=O.offsetLeft;Q-=O.offsetTop}return{left:P,top:Q}};L.preventDefaultException=function(O,Q){for(var P in Q){if(Q[P].test(O[P])){return true}}return false};L.extend(L.eventType={},{touchstart:1,touchmove:1,touchend:1,mousedown:2,mousemove:2,mouseup:2,MSPointerDown:3,MSPointerMove:3,MSPointerUp:3});L.extend(L.ease={},{quadratic:{style:"cubic-bezier(0.25, 0.46, 0.45, 0.94)",fn:function(O){return O*(2-O)}},circular:{style:"cubic-bezier(0.1, 0.57, 0.1, 1)",fn:function(O){return D.sqrt(1-(--O*O))}},back:{style:"cubic-bezier(0.175, 0.885, 0.32, 1.275)",fn:function(P){var O=4;return(P=P-1)*P*((O+1)*P+O)+1}},bounce:{style:"",fn:function(O){if((O/=1)<(1/2.75)){return 7.5625*O*O}else{if(O<(2/2.75)){return 7.5625*(O-=(1.5/2.75))*O+0.75}else{if(O<(2.5/2.75)){return 7.5625*(O-=(2.25/2.75))*O+0.9375}else{return 7.5625*(O-=(2.625/2.75))*O+0.984375}}}}},elastic:{style:"",fn:function(Q){var O=0.22,P=0.4;if(Q===0){return 0}if(Q==1){return 1}return(P*D.pow(2,-10*Q)*D.sin((Q-O/4)*(2*D.PI)/O)+1)}}});L.tap=function(O,P){var Q=B.createEvent("Event");Q.initEvent(P,true,true);Q.pageX=O.pageX;Q.pageY=O.pageY;O.target.dispatchEvent(Q)};L.click=function(O){var P=O.target,Q;if(P.tagName!="SELECT"&&P.tagName!="INPUT"&&P.tagName!="TEXTAREA"){Q=B.createEvent("MouseEvents");Q.initMouseEvent("click",true,true,O.view,1,P.screenX,P.screenY,P.clientX,P.clientY,O.ctrlKey,O.altKey,O.shiftKey,O.metaKey,0,null);Q._constructed=true;P.dispatchEvent(Q)}};return L})();function F(I,K){this.wrapper=typeof I=="string"?B.querySelector(I):I;this.scroller=this.wrapper.children[0];this.scrollerStyle=this.scroller.style;this.options={resizeIndicator:true,mouseWheelSpeed:20,snapThreshold:0.334,startX:0,startY:0,scrollY:true,directionLockThreshold:5,momentum:true,bounce:true,bounceTime:600,bounceEasing:"",preventDefault:true,preventDefaultException:{tagName:/^(INPUT|TEXTAREA|BUTTON|SELECT)$/},HWCompositing:true,useTransition:true,useTransform:true,topOffset:0};for(var J in K){this.options[J]=K[J]}this.translateZ=this.options.HWCompositing&&A.hasPerspective?" translateZ(0)":"";this.options.useTransition=A.hasTransition&&this.options.useTransition;this.options.useTransform=A.hasTransform&&this.options.useTransform;this.options.eventPassthrough=this.options.eventPassthrough===true?"vertical":this.options.eventPassthrough;this.options.preventDefault=!this.options.eventPassthrough&&this.options.preventDefault;this.options.scrollY=this.options.eventPassthrough=="vertical"?false:this.options.scrollY;this.options.scrollX=this.options.eventPassthrough=="horizontal"?false:this.options.scrollX;this.options.freeScroll=this.options.freeScroll&&!this.options.eventPassthrough;this.options.directionLockThreshold=this.options.eventPassthrough?0:this.options.directionLockThreshold;this.options.bounceEasing=typeof this.options.bounceEasing=="string"?A.ease[this.options.bounceEasing]||A.ease.circular:this.options.bounceEasing;this.options.resizePolling=this.options.resizePolling===undefined?60:this.options.resizePolling;if(this.options.tap===true){this.options.tap="tap"}this.options.invertWheelDirection=this.options.invertWheelDirection?-1:1;this.x=0;this.y=0;this.directionX=0;this.directionY=0;this._events={};this._init();this.refresh();this.scrollTo(this.options.startX,this.options.startY);this.enable()}F.prototype={version:"5.0.5",_init:function(){this._initEvents();if(this.options.scrollbars||this.options.indicators){this._initIndicators()}if(this.options.mouseWheel){this._initWheel()}if(this.options.snap){this._initSnap()}if(this.options.keyBindings){this._initKeys()}},destroy:function(){this._initEvents(true);this._execEvent("destroy")},_transitionEnd:function(I){if(I.target!=this.scroller){return}this._transitionTime(0);if(!this.resetPosition(this.options.bounceTime)){this._execEvent("scrollEnd")}},_start:function(I){if(A.eventType[I.type]!=1){if(I.button!==0){return}}if(!this.enabled||(this.initiated&&A.eventType[I.type]!==this.initiated)){return}if(this.options.preventDefault&&!A.isAndroidBrowser&&!A.preventDefaultException(I.target,this.options.preventDefaultException)){var L=I.target;if(L.tagName!="SELECT"&&L.tagName!="INPUT"&&L.tagName!="TEXTAREA"){I.preventDefault()}}var J=I.touches?I.touches[0]:I,K;this.initiated=A.eventType[I.type];this.moved=false;this.distX=0;this.distY=0;this.directionX=0;this.directionY=0;this.directionLocked=0;this._transitionTime();this.isAnimating=false;this.startTime=A.getTime();if(this.options.useTransition&&this.isInTransition){K=this.getComputedPosition();this._translate(D.round(K.x),D.round(K.y));this.isInTransition=false}this.startX=this.x;this.startY=this.y;this.absStartX=this.x;this.absStartY=this.y;this.pointX=J.pageX;this.pointY=J.pageY;this._execEvent("scrollStart")},_move:function(I){if(!this.enabled||A.eventType[I.type]!==this.initiated){return}if(this.options.preventDefault){I.preventDefault()}var K=I.touches?I.touches[0]:I,P=K.pageX-this.pointX,J=K.pageY-this.pointY,O=A.getTime(),Q,N,M,L;this.pointX=K.pageX;this.pointY=K.pageY;this.distX+=P;this.distY+=J;M=D.abs(this.distX);L=D.abs(this.distY);if(O-this.endTime>300&&(M<10&&L<10)){return}if(!this.directionLocked&&!this.options.freeScroll){if(M>L+this.options.directionLockThreshold){this.directionLocked="h"}else{if(L>=M+this.options.directionLockThreshold){this.directionLocked="v"}else{this.directionLocked="n"}}}if(this.directionLocked=="h"){if(this.options.eventPassthrough=="vertical"){I.preventDefault()}else{if(this.options.eventPassthrough=="horizontal"){this.initiated=false;return}}J=0}else{if(this.directionLocked=="v"){if(this.options.eventPassthrough=="horizontal"){I.preventDefault()}else{if(this.options.eventPassthrough=="vertical"){this.initiated=false;return}}P=0}}Q=this.x+(this.hasHorizontalScroll?P:0);N=this.y+(this.hasVerticalScroll?J:0);if(Q>0||Q<this.maxScrollX){Q=this.options.bounce?this.x+P/3:Q>0?0:this.maxScrollX}if(N>0||N<this.maxScrollY){N=this.options.bounce?this.y+J/3:N>0?0:this.maxScrollY}this.directionX=P>0?-1:P<0?1:0;this.directionY=J>0?-1:J<0?1:0;this.moved=true;this._translate(Q,N);if(O-this.startTime>300){this.startTime=O;this.startX=this.x;this.startY=this.y}this._execEvent("scrollMove")},_end:function(M){if(!this.enabled||A.eventType[M.type]!==this.initiated){return}if(this.options.preventDefault&&!A.preventDefaultException(M.target,this.options.preventDefaultException)){M.preventDefault()}var O=M.changedTouches?M.changedTouches[0]:M,I,R,P=A.getTime()-this.startTime,T=D.round(this.x),S=D.round(this.y),N=D.abs(T-this.startX),L=D.abs(S-this.startY),J=0,Q="";this.scrollTo(T,S);this.isInTransition=0;this.initiated=0;this.endTime=A.getTime();if(this.resetPosition(this.options.bounceTime)){return}if(!this.moved){if(this.options.tap){A.tap(M,this.options.tap)}if(this.options.click){A.click(M)}return}if(this._events.flick&&P<200&&N<100&&L<100){this._execEvent("flick");return}if(this.options.momentum&&P<300){I=this.hasHorizontalScroll?A.momentum(this.x,this.startX,P,this.maxScrollX,this.options.bounce?this.wrapperWidth:0):{destination:T,duration:0};R=this.hasVerticalScroll?A.momentum(this.y,this.startY,P,this.maxScrollY,this.options.bounce?this.wrapperHeight:0):{destination:S,duration:0};T=I.destination;S=R.destination;J=D.max(I.duration,R.duration);this.isInTransition=1}if(this.options.snap){var K=this._nearestSnap(T,S);this.currentPage=K;J=this.options.snapSpeed||D.max(D.max(D.min(D.abs(T-K.x),1000),D.min(D.abs(S-K.y),1000)),300);T=K.x;S=K.y;this.directionX=0;this.directionY=0;Q=this.options.bounceEasing}if(T!=this.x||S!=this.y){if(T>0||T<this.maxScrollX||S>0||S<this.maxScrollY){Q=A.ease.quadratic}this.scrollTo(T,S,J,Q);return}this._execEvent("scrollEnd")},_resize:function(){var I=this;clearTimeout(this.resizeTimeout);this.resizeTimeout=setTimeout(function(){I.refresh()},this.options.resizePolling)},resetPosition:function(I){var J=this.x,K=this.y;I=I||0;if(!this.hasHorizontalScroll||this.x>0){J=0}else{if(this.x<this.maxScrollX){J=this.maxScrollX}}if(!this.hasVerticalScroll||this.y>0){K=0}else{if(this.y<this.maxScrollY){K=this.maxScrollY}}if(this.y>=this.minScrollY||this.maxScrollY>0){K=this.minScrollY}else{if(this.y<this.maxScrollY){if(this.scrollerHeight==this.wrapperHeight){K=this.minScrollY}else{K=this.maxScrollY}}else{K=this.y}}if(J==this.x&&K==this.y){return false}this.scrollTo(J,K,I,this.options.bounceEasing);return true},disable:function(){this.enabled=false},enable:function(){this.enabled=true},refresh:function(){var I=this.wrapper.offsetHeight;this.wrapperWidth=this.wrapper.clientWidth;this.wrapperHeight=this.wrapper.clientHeight;this.minScrollY=-this.options.topOffset||0;this.scrollerWidth=this.scroller.offsetWidth;this.scrollerHeight=this.scroller.offsetHeight+this.minScrollY;this.maxScrollX=this.wrapperWidth-this.scrollerWidth;this.maxScrollY=this.wrapperHeight-this.scrollerHeight+this.minScrollY;this.hasHorizontalScroll=this.options.scrollX&&this.maxScrollX<0;this.hasVerticalScroll=this.options.scrollY&&this.maxScrollY<0;if(!this.hasHorizontalScroll){this.maxScrollX=0;this.scrollerWidth=this.wrapperWidth}if(!this.hasVerticalScroll){this.maxScrollY=0;this.scrollerHeight=this.wrapperHeight}this.endTime=0;this.directionX=0;this.directionY=0;this.wrapperOffset=A.offset(this.wrapper);this._execEvent("refresh");this.resetPosition()},on:function(I,J){if(!this._events[I]){this._events[I]=[]}this._events[I].push(J)},_execEvent:function(I){if(!this._events[I]){return}var J=0,K=this._events[I].length;if(!K){return}for(;J<K;J++){this._events[I][J].call(this)}},scrollBy:function(J,K,L,I){J=this.x+J;K=this.y+K;L=L||0;this.scrollTo(J,K,L,I)},scrollTo:function(J,K,L,I){I=I||A.ease.circular;if(!L||(this.options.useTransition&&I.style)){this._transitionTimingFunction(I.style);this._transitionTime(L);this._translate(J,K)}else{this._animate(J,K,L,I.fn)}},scrollToElement:function(I,M,J,K,L){I=I.nodeType?I:this.scroller.querySelector(I);if(!I){return}var N=A.offset(I);N.left-=this.wrapperOffset.left;N.top-=this.wrapperOffset.top;if(J===true){J=D.round(I.offsetWidth/2-this.wrapper.offsetWidth/2)}if(K===true){K=D.round(I.offsetHeight/2-this.wrapper.offsetHeight/2)}N.left-=J||0;N.top-=K||0;N.left=N.left>0?0:N.left<this.maxScrollX?this.maxScrollX:N.left;N.top=N.top>0?0:N.top<this.maxScrollY?this.maxScrollY:N.top;M=M===undefined||M===null||M==="auto"?D.max(D.abs(this.x-N.left),D.abs(this.y-N.top)):M;this.scrollTo(N.left,N.top,M,L)},_transitionTime:function(I){I=I||0;this.scrollerStyle[A.style.transitionDuration]=I+"ms";if(this.indicator1){this.indicator1.transitionTime(I)}if(this.indicator2){this.indicator2.transitionTime(I)}},_transitionTimingFunction:function(I){this.scrollerStyle[A.style.transitionTimingFunction]=I;if(this.indicator1){this.indicator1.transitionTimingFunction(I)}if(this.indicator2){this.indicator2.transitionTimingFunction(I)}},_translate:function(I,J){if(this.options.useTransform){this.scrollerStyle[A.style.transform]="translate("+I+"px,"+J+"px)"+this.translateZ}else{I=D.round(I);J=D.round(J);this.scrollerStyle.left=I+"px";this.scrollerStyle.top=J+"px"}this.x=I;this.y=J;if(this.indicator1){this.indicator1.updatePosition()}if(this.indicator2){this.indicator2.updatePosition()}},_initEvents:function(I){var J=I?A.removeEvent:A.addEvent,K=this.options.bindToWrapper?this.wrapper:C;J(C,"orientationchange",this);J(C,"resize",this);J(this.wrapper,"mousedown",this);J(K,"mousemove",this);J(K,"mousecancel",this);J(K,"mouseup",this);if(A.hasPointer){J(this.wrapper,"MSPointerDown",this);J(K,"MSPointerMove",this);J(K,"MSPointerCancel",this);J(K,"MSPointerUp",this)}if(A.hasTouch){J(this.wrapper,"touchstart",this);J(K,"touchmove",this);J(K,"touchcancel",this);J(K,"touchend",this)}J(this.scroller,"transitionend",this);J(this.scroller,"webkitTransitionEnd",this);J(this.scroller,"oTransitionEnd",this);J(this.scroller,"MSTransitionEnd",this)},getComputedPosition:function(){var I=C.getComputedStyle(this.scroller,null),J,K;if(this.options.useTransform){I=I[A.style.transform].split(")")[0].split(", ");J=+(I[12]||I[4]);K=+(I[13]||I[5])}else{J=+I.left.replace(/[^-\d]/g,"");K=+I.top.replace(/[^-\d]/g,"")}return{x:J,y:K}},_initIndicators:function(){var I=this.options.interactiveScrollbars,M=typeof this.options.scrollbars!="object",J=typeof this.options.scrollbars!="string",L,K;if(this.options.scrollbars){if(this.options.scrollY){L={el:G("v",I,this.options.scrollbars),interactive:I,defaultScrollbars:true,customStyle:J,resize:this.options.resizeIndicator,listenX:false};this.wrapper.appendChild(L.el)}if(this.options.scrollX){K={el:G("h",I,this.options.scrollbars),interactive:I,defaultScrollbars:true,customStyle:J,resize:this.options.resizeIndicator,listenY:false};this.wrapper.appendChild(K.el)}}else{L=this.options.indicators.length?this.options.indicators[0]:this.options.indicators;K=this.options.indicators[1]&&this.options.indicators[1]}if(L){this.indicator1=new E(this,L)}if(K){this.indicator2=new E(this,K)}this.on("refresh",function(){if(this.indicator1){this.indicator1.refresh()}if(this.indicator2){this.indicator2.refresh()}});this.on("destroy",function(){if(this.indicator1){this.indicator1.destroy();this.indicator1=null}if(this.indicator2){this.indicator2.destroy();this.indicator2=null}})},_initWheel:function(){A.addEvent(this.wrapper,"mousewheel",this);A.addEvent(this.wrapper,"DOMMouseScroll",this);this.on("destroy",function(){A.removeEvent(this.wrapper,"mousewheel",this);A.removeEvent(this.wrapper,"DOMMouseScroll",this)})},_wheel:function(J){if(!this.enabled){return}var N,I,L,M,K=this;clearTimeout(this.wheelTimeout);this.wheelTimeout=setTimeout(function(){K._execEvent("scrollEnd")},400);J.preventDefault();if("wheelDeltaX" in J){N=J.wheelDeltaX/120;I=J.wheelDeltaY/120}else{if("wheelDelta" in J){N=I=J.wheelDelta/120}else{if("detail" in J){N=I=-J.detail/3}else{return}}}N*=this.options.mouseWheelSpeed;I*=this.options.mouseWheelSpeed;if(!this.hasVerticalScroll){N=I;I=0}if(this.options.snap){L=this.currentPage.pageX;M=this.currentPage.pageY;if(N>0){L--}else{if(N<0){L++}}if(I>0){M--}else{if(I<0){M++}}this.goToPage(L,M);return}L=this.x+(this.hasHorizontalScroll?N*this.options.invertWheelDirection:0);M=this.y+(this.hasVerticalScroll?I*this.options.invertWheelDirection:0);if(L>0){L=0}else{if(L<this.maxScrollX){L=this.maxScrollX}}if(M>0){M=0}else{if(M<this.maxScrollY){M=this.maxScrollY}}this.scrollTo(L,M,0)},_initSnap:function(){this.currentPage={};if(typeof this.options.snap=="string"){this.options.snap=this.scroller.querySelectorAll(this.options.snap)}this.on("refresh",function(){var S=0,M,N=0,L,K,I,P=0,Q,R=this.options.snapStepX||this.wrapperWidth,O=this.options.snapStepY||this.wrapperHeight,J;this.pages=[];if(!this.wrapperWidth||!this.wrapperHeight||!this.scrollerWidth||!this.scrollerHeight){return}if(this.options.snap===true){K=D.round(R/2);I=D.round(O/2);while(P>-this.scrollerWidth){this.pages[S]=[];M=0;Q=0;while(Q>-this.scrollerHeight){this.pages[S][M]={x:D.max(P,this.maxScrollX),y:D.max(Q,this.maxScrollY),width:R,height:O,cx:P-K,cy:Q-I};Q-=O;M++}P-=R;S++}}else{J=this.options.snap;M=J.length;L=-1;for(;S<M;S++){if(S===0||J[S].offsetLeft<=J[S-1].offsetLeft){N=0;L++}if(!this.pages[N]){this.pages[N]=[]}P=D.max(-J[S].offsetLeft,this.maxScrollX);Q=D.max(-J[S].offsetTop,this.maxScrollY);K=P-D.round(J[S].offsetWidth/2);I=Q-D.round(J[S].offsetHeight/2);this.pages[N][L]={x:P,y:Q,width:J[S].offsetWidth,height:J[S].offsetHeight,cx:K,cy:I};if(P>this.maxScrollX){N++}}}this.goToPage(this.currentPage.pageX||0,this.currentPage.pageY||0,0);if(this.options.snapThreshold%1===0){this.snapThresholdX=this.options.snapThreshold;this.snapThresholdY=this.options.snapThreshold}else{this.snapThresholdX=D.round(this.pages[this.currentPage.pageX][this.currentPage.pageY].width*this.options.snapThreshold);this.snapThresholdY=D.round(this.pages[this.currentPage.pageX][this.currentPage.pageY].height*this.options.snapThreshold)}});this.on("flick",function(){var I=this.options.snapSpeed||D.max(D.max(D.min(D.abs(this.x-this.startX),1000),D.min(D.abs(this.y-this.startY),1000)),300);this.goToPage(this.currentPage.pageX+this.directionX,this.currentPage.pageY+this.directionY,I)})},_nearestSnap:function(L,M){if(!this.pages.length){return{x:0,y:0,pageX:0,pageY:0}}var I=0,J=this.pages.length,K=0;if(D.abs(L-this.absStartX)<this.snapThresholdX&&D.abs(M-this.absStartY)<this.snapThresholdY){return this.currentPage}if(L>0){L=0}else{if(L<this.maxScrollX){L=this.maxScrollX}}if(M>0){M=0}else{if(M<this.maxScrollY){M=this.maxScrollY}}for(;I<J;I++){if(L>=this.pages[I][0].cx){L=this.pages[I][0].x;break}}J=this.pages[I].length;for(;K<J;K++){if(M>=this.pages[0][K].cy){M=this.pages[0][K].y;break}}if(I==this.currentPage.pageX){I+=this.directionX;if(I<0){I=0}else{if(I>=this.pages.length){I=this.pages.length-1}}L=this.pages[I][0].x}if(K==this.currentPage.pageY){K+=this.directionY;if(K<0){K=0}else{if(K>=this.pages[0].length){K=this.pages[0].length-1}}M=this.pages[0][K].y}return{x:L,y:M,pageX:I,pageY:K}},goToPage:function(L,M,N,J){J=J||this.options.bounceEasing;if(L>=this.pages.length){L=this.pages.length-1}else{if(L<0){L=0}}if(M>=this.pages[L].length){M=this.pages[L].length-1}else{if(M<0){M=0}}var K=this.pages[L][M].x,I=this.pages[L][M].y;N=N===undefined?this.options.snapSpeed||D.max(D.max(D.min(D.abs(K-this.x),1000),D.min(D.abs(I-this.y),1000)),300):N;this.currentPage={x:K,y:I,pageX:L,pageY:M};this.scrollTo(K,I,N,J)},next:function(J,I){var K=this.currentPage.pageX,L=this.currentPage.pageY;K++;if(K>=this.pages.length&&this.hasVerticalScroll){K=0;L++}this.goToPage(K,L,J,I)},prev:function(J,I){var K=this.currentPage.pageX,L=this.currentPage.pageY;K--;if(K<0&&this.hasVerticalScroll){K=0;L--}this.goToPage(K,L,J,I)},_initKeys:function(J){var K={pageUp:33,pageDown:34,end:35,home:36,left:37,up:38,right:39,down:40};var I;if(typeof this.options.keyBindings=="object"){for(I in this.options.keyBindings){if(typeof this.options.keyBindings[I]=="string"){this.options.keyBindings[I]=this.options.keyBindings[I].toUpperCase().charCodeAt(0)}}}else{this.options.keyBindings={}}for(I in K){this.options.keyBindings[I]=this.options.keyBindings[I]||K[I]}A.addEvent(C,"keydown",this);this.on("destroy",function(){A.removeEvent(C,"keydown",this)})},_key:function(K){if(!this.enabled){return}var J=this.options.snap,P=J?this.currentPage.pageX:this.x,O=J?this.currentPage.pageY:this.y,I=A.getTime(),N=this.keyTime||0,L=0.25,M;if(this.options.useTransition&&this.isInTransition){M=this.getComputedPosition();this._translate(D.round(M.x),D.round(M.y));this.isInTransition=false}this.keyAcceleration=I-N<200?D.min(this.keyAcceleration+L,50):0;switch(K.keyCode){case this.options.keyBindings.pageUp:if(this.hasHorizontalScroll&&!this.hasVerticalScroll){P+=J?1:this.wrapperWidth}else{O+=J?1:this.wrapperHeight}break;case this.options.keyBindings.pageDown:if(this.hasHorizontalScroll&&!this.hasVerticalScroll){P-=J?1:this.wrapperWidth}else{O-=J?1:this.wrapperHeight}break;case this.options.keyBindings.end:P=J?this.pages.length-1:this.maxScrollX;O=J?this.pages[0].length-1:this.maxScrollY;break;case this.options.keyBindings.home:P=0;O=0;break;case this.options.keyBindings.left:P+=J?-1:5+this.keyAcceleration>>0;break;case this.options.keyBindings.up:O+=J?1:5+this.keyAcceleration>>0;break;case this.options.keyBindings.right:P-=J?-1:5+this.keyAcceleration>>0;break;case this.options.keyBindings.down:O-=J?1:5+this.keyAcceleration>>0;break}if(J){this.goToPage(P,O);return}if(P>0){P=0;this.keyAcceleration=0}else{if(P<this.maxScrollX){P=this.maxScrollX;this.keyAcceleration=0}}if(O>0){O=0;this.keyAcceleration=0}else{if(O<this.maxScrollY){O=this.maxScrollY;this.keyAcceleration=0}}this.scrollTo(P,O,0);this.keyTime=I},_animate:function(J,I,L,Q){var N=this,M=this.x,O=this.y,R=A.getTime(),P=R+L;function K(){var V=A.getTime(),S,U,T;if(V>=P){N.isAnimating=false;N._translate(J,I);if(!N.resetPosition(N.options.bounceTime)){N._execEvent("scrollEnd")}return}V=(V-R)/L;T=Q(V);S=(J-M)*T+M;U=(I-O)*T+O;N._translate(S,U);if(N.isAnimating){H(K)}}this.isAnimating=true;K()},handleEvent:function(I){switch(I.type){case"touchstart":case"MSPointerDown":case"mousedown":this._start(I);break;case"touchmove":case"MSPointerMove":case"mousemove":this._move(I);break;case"touchend":case"MSPointerUp":case"mouseup":case"touchcancel":case"MSPointerCancel":case"mousecancel":this._end(I);break;case"orientationchange":case"resize":this._resize();break;case"transitionend":case"webkitTransitionEnd":case"oTransitionEnd":case"MSTransitionEnd":this._transitionEnd(I);break;case"DOMMouseScroll":case"mousewheel":this._wheel(I);break;case"keydown":this._key(I);break}}};function G(M,I,L){var K=B.createElement("div"),J=B.createElement("div");if(L===true){K.style.cssText="position:absolute;z-index:9999";J.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;position:absolute;border:1px solid rgba(180,180,180,0.9);border-radius:2px;inset;background-image:-webkit-gradient(linear,0% 100%,100% 100%,color-stop(0, #ddd),	color-stop(0.8, #fff));opacity:0.8;"}J.className="iScrollIndicator";if(M=="h"){if(L===true){K.style.cssText+=";height:7px;left:2px;right:2px;bottom:0";J.style.height="100%"}K.className="iScrollHorizontalScrollbar"}else{if(L===true){K.style.cssText+=";width:7px;bottom:2px;top:2px;right:1px";J.style.width="100%"}K.className="iScrollVerticalScrollbar"}if(!I){K.style.pointerEvents="none"}K.appendChild(J);return K}function E(J,K){this.wrapper=typeof K.el=="string"?B.querySelector(K.el):K.el;this.indicator=this.wrapper.children[0];this.indicatorStyle=this.indicator.style;this.scroller=J;this.options={listenX:true,listenY:true,interactive:false,resize:true,defaultScrollbars:false,speedRatioX:0,speedRatioY:0};for(var I in K){this.options[I]=K[I]}this.sizeRatioX=1;this.sizeRatioY=1;this.maxPosX=0;this.maxPosY=0;if(this.options.interactive){A.addEvent(this.indicator,"touchstart",this);A.addEvent(this.indicator,"MSPointerDown",this);A.addEvent(this.indicator,"mousedown",this);A.addEvent(C,"touchend",this);A.addEvent(C,"MSPointerUp",this);A.addEvent(C,"mouseup",this)}}E.prototype={handleEvent:function(I){switch(I.type){case"touchstart":case"MSPointerDown":case"mousedown":this._start(I);break;case"touchmove":case"MSPointerMove":case"mousemove":this._move(I);break;case"touchend":case"MSPointerUp":case"mouseup":case"touchcancel":case"MSPointerCancel":case"mousecancel":this._end(I);break}},destroy:function(){if(this.options.interactive){A.removeEvent(this.indicator,"touchstart",this);A.removeEvent(this.indicator,"MSPointerDown",this);A.removeEvent(this.indicator,"mousedown",this);A.removeEvent(C,"touchmove",this);A.removeEvent(C,"MSPointerMove",this);A.removeEvent(C,"mousemove",this);A.removeEvent(C,"touchend",this);A.removeEvent(C,"MSPointerUp",this);A.removeEvent(C,"mouseup",this)}if(this.options.defaultScrollbars){this.wrapper.parentNode.removeChild(this.wrapper)}},_start:function(I){var J=I.touches?I.touches[0]:I;I.preventDefault();I.stopPropagation();this.transitionTime(0);this.initiated=true;this.moved=false;this.lastPointX=J.pageX;this.lastPointY=J.pageY;this.startTime=A.getTime();A.addEvent(C,"touchmove",this);A.addEvent(C,"MSPointerMove",this);A.addEvent(C,"mousemove",this);this.scroller._execEvent("scrollStart")},_move:function(K){var L=K.touches?K.touches[0]:K,N,M,J,O,I=A.getTime();this.moved=true;N=L.pageX-this.lastPointX;this.lastPointX=L.pageX;M=L.pageY-this.lastPointY;this.lastPointY=L.pageY;J=this.x+N;O=this.y+M;this._pos(J,O);K.preventDefault();K.stopPropagation()},_end:function(I){if(!this.initiated){return}this.initiated=false;I.preventDefault();I.stopPropagation();A.removeEvent(C,"touchmove",this);A.removeEvent(C,"MSPointerMove",this);A.removeEvent(C,"mousemove",this);if(this.scroller.options.snap){var J=this.scroller._nearestSnap(this.scroller.x,this.scroller.y);var K=this.options.snapSpeed||D.max(D.max(D.min(D.abs(this.scroller.x-J.x),1000),D.min(D.abs(this.scroller.y-J.y),1000)),300);if(this.scroller.x!=J.x||this.scroller.y!=J.y){this.scroller.directionX=0;this.scroller.directionY=0;this.scroller.currentPage=J;this.scroller.scrollTo(J.x,J.y,K,this.scroller.options.bounceEasing)}}if(this.moved){this.scroller._execEvent("scrollEnd")}},transitionTime:function(I){I=I||0;this.indicatorStyle[A.style.transitionDuration]=I+"ms"},transitionTimingFunction:function(I){this.indicatorStyle[A.style.transitionTimingFunction]=I},refresh:function(){this.transitionTime(0);if(this.options.listenX&&!this.options.listenY){this.indicatorStyle.display=this.scroller.hasHorizontalScroll?"block":"none"}else{if(this.options.listenY&&!this.options.listenX){this.indicatorStyle.display=this.scroller.hasVerticalScroll?"block":"none"}else{this.indicatorStyle.display=this.scroller.hasHorizontalScroll||this.scroller.hasVerticalScroll?"block":"none"}}if(this.scroller.hasHorizontalScroll&&this.scroller.hasVerticalScroll){A.addClass(this.wrapper,"iScrollBothScrollbars");A.removeClass(this.wrapper,"iScrollLoneScrollbar");if(this.options.defaultScrollbars&&this.options.customStyle){if(this.options.listenX){this.wrapper.style.right="8px"}else{this.wrapper.style.bottom="8px"}}}else{A.removeClass(this.wrapper,"iScrollBothScrollbars");A.addClass(this.wrapper,"iScrollLoneScrollbar");if(this.options.defaultScrollbars&&this.options.customStyle){if(this.options.listenX){this.wrapper.style.right="2px"}else{this.wrapper.style.bottom="2px"}}}var I=this.wrapper.offsetHeight;if(this.options.listenX){this.wrapperWidth=this.wrapper.clientWidth;if(this.options.resize){this.indicatorWidth=D.max(D.round(this.wrapperWidth*this.wrapperWidth/(this.scroller.scrollerWidth||this.wrapperWidth||1)),8);this.indicatorStyle.width=this.indicatorWidth+"px"}else{this.indicatorWidth=this.indicator.clientWidth}this.maxPosX=this.wrapperWidth-this.indicatorWidth;this.sizeRatioX=this.options.speedRatioX||(this.scroller.maxScrollX&&(this.maxPosX/this.scroller.maxScrollX))}if(this.options.listenY){this.wrapperHeight=this.wrapper.clientHeight;if(this.options.resize){this.indicatorHeight=D.max(D.round(this.wrapperHeight*this.wrapperHeight/(this.scroller.scrollerHeight||this.wrapperHeight||1)),8);this.indicatorStyle.height=this.indicatorHeight+"px"}else{this.indicatorHeight=this.indicator.clientHeight}this.maxPosY=this.wrapperHeight-this.indicatorHeight;this.sizeRatioY=this.options.speedRatioY||(this.scroller.maxScrollY&&(this.maxPosY/this.scroller.maxScrollY))}this.updatePosition()},updatePosition:function(){var I=D.round(this.sizeRatioX*this.scroller.x)||0,J=D.round(this.sizeRatioY*this.scroller.y)||0;if(!this.options.ignoreBoundaries){if(I<0){I=0}else{if(I>this.maxPosX){I=this.maxPosX}}if(J<0){J=0}else{if(J>this.maxPosY){J=this.maxPosY}}}this.x=I;this.y=J;if(this.scroller.options.useTransform){this.indicatorStyle[A.style.transform]="translate("+I+"px,"+J+"px)"+this.scroller.translateZ}else{this.indicatorStyle.left=I+"px";this.indicatorStyle.top=J+"px"}},_pos:function(I,J){if(I<0){I=0}else{if(I>this.maxPosX){I=this.maxPosX}}if(J<0){J=0}else{if(J>this.maxPosY){J=this.maxPosY}}I=this.options.listenX?D.round(I/this.sizeRatioX):this.scroller.x;J=this.options.listenY?D.round(J/this.sizeRatioY):this.scroller.y;this.scroller.scrollTo(I,J)}};F.ease=A.ease;return F})(window,document,Math);