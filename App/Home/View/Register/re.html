<include file="Public/head" />
<body>
    <form id="ii" action="{:U('Register/re2')}" method="post" >
          <input  type="text" id="phone"  name="phone">
          <input  type="text" id="code_put" name="code">
          <button id="code" type="button"  >获取验证码</button>
          <button id="queren" type="button">确定</button>
    </form>
</body>
<script type="text/javascript">
/**/
$(document).ready(function(){ 
　　/*获取手机验证码*/
	$("#code").click(function(){
		var phone=$('#phone').val();
		var url="{:U('Register/Sensms')}"
		if(phone==""){
			alert('请输入手机号码');
			return false
		}else{
			  $.ajax({
		        type:"post",
		        url:url,
		        data:{'phone':phone},
		        dataType:"json",
		        success:function(data){
		        	if(data=="Sensmsok")
		        	alert('发送成功');
		        	return false;
             	}

            });
		}	
	})
	/*注册认证*/
	$("#queren").click(function(){
		var phone=$('#phone').val();
		var code_put =$('#code_put').val();
		var url="{:U('Register/Verif')}"
		if(phone==""){
			alert('请输入手机号码');
			return false;
		}
		if(phone=="sjyzc"){
			alert('该手机号码已经注册 ');
			return false;
		}
		if(code_put==""){
			alert('请输入验证码');
			return false;
		}

		$.ajax({
		        type:"post",
		        url:url,
		        data:{'phone':phone,"code":code_put},
		        dataType:"json",
		        success:function(data){
		        	if(data=="ok"){
		        		$('#ii').submit();
		        		
		        		 return false;
		        	}
		        	
		        	if(data=="no"){

		        		alert('验证码或手机号码错误');
		        		return false;
		        	}	
		        	if(data=="ophoneno"){
		        		alert('该手机已经绑定');
		        		return false;
		        	}

             	}

        });
	})

	
}); 	

</script>
<html>
